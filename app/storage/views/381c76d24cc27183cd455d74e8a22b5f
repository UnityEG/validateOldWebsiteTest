<?php $__env->startSection('main'); ?>
<div align="right"><?php echo link_to_route('GiftVouchersParameters.create', 'Create Gift Voucher'); ?></div>
<h1>Gift Vouchers</h1>

<?php if(!$GiftVouchersParameters->count()): ?>
    There are no gift voucher parameters
<?php else: ?>
	<table class="table table-striped table-bordered">
    <thead>
    	<tr>
	        <th>&nbsp;</th>
        	<th>Voucher Title</th>
        	<th>Merchant</th>
	        <th>Single Use</th>
	        <th>Number of Uses</th>
	        <th>Valid For</th>
	        <th>Limited Quantity</th>
	        <th>Quantity</th>
	        <th>Min Val</th>
	        <th>Max Val</th>
	        <th>Terms of Use</th>
	        <th colspan="2"></th>
        </tr>
    </thead>
    <tbody>
    <?php foreach($GiftVouchersParameters as $GiftVouchersParameter): ?>
    	<?php $MerchantBusinessName = (Merchant::find($GiftVouchersParameter->MerchantID)->business_name);?>
    	<?php $SingleUse 		= ($GiftVouchersParameter->SingleUse 		== 1) ? 'Yes' : 'No'; ?>
    	<?php $NoOfUses 		= ($GiftVouchersParameter->NoOfUses 		!= '')	? $GiftVouchersParameter->NoOfUses : 'Unlimited'; ?>
    	<?php //$Expires   		= ($GiftVouchersParameter->Expires   		== 1) ? 'Yes' : 'No'; ?>
    	<?php $LimitedQuantity	= ($GiftVouchersParameter->LimitedQuantity	== 1) ? 'Yes' : 'No'; ?>
    	<?php $Quantity			= ($GiftVouchersParameter->LimitedQuantity	== 1 ) 	? $GiftVouchersParameter->Quantity : 'Unlimited'; ?>
    	<?php
    	switch ($GiftVouchersParameter->ValidForUnits) {
/*
    		case null:
    			$ValidForUnits = 'Non expired';
    			break;
*/
    		case 'd':
    			$ValidForUnits = 'day(s)';
    			break;
    		case 'w':
    			$ValidForUnits = 'week(s)';
    			break;
    		case 'm':
    			$ValidForUnits = 'month(s)';
    			break;
    		default:
    			$ValidForUnits = 'Unkown unit!';
    	} // switch
    	?>
    	<?php $purchase_btn= link_to_route('GiftVoucher.create', 'Purchase', array('customer_id'=>'4', 'gift_vouchers_parameters_id'=>$GiftVouchersParameter->id), array('class' => 'btn btn-info'));?>

        <tr>

			<td><?php echo $purchase_btn; ?></td>
        	<td><?php echo link_to_route('GiftVouchersParameters.show', $GiftVouchersParameter->Title, array($GiftVouchersParameter->id)); ?></td>
        	<td><?php echo $MerchantBusinessName; ?></td>
          	<td><?php echo $SingleUse; ?></td>
          	<td><?php echo $NoOfUses; ?></td>
          	<td><?php echo $GiftVouchersParameter->ValidFor	. ' ' . $ValidForUnits; ?></td>
          	<td><?php echo $LimitedQuantity; ?></td>
          	<td><?php echo $Quantity; ?></td>
          	<td><?php echo $GiftVouchersParameter->MinVal; ?></td>
          	<td><?php echo $GiftVouchersParameter->MaxVal; ?></td>
          	<td><?php echo $GiftVouchersParameter->TermsOfUse; ?></td>
            <td><?php echo link_to_route('GiftVouchersParameters.edit', 'Edit', array($GiftVouchersParameter->id), array('class' => 'btn btn-info')); ?></td>
            <td><?php echo Form::open(array('method' => 'DELETE', 'route' => array('GiftVouchersParameters.destroy', $GiftVouchersParameter->id))); ?>

                	<?php echo Form::submit('Delete', array('class' => 'btn btn-danger', 'onclick'=>'return ConfirmDelete()')); ?>

                <?php echo Form::close(); ?></td>
        </tr>
    <?php endforeach; ?>
    </tbody>
    </table>
    <?php echo $GiftVouchersParameters->links(); ?>


    <script>
	function ConfirmDelete() {
	    var r = confirm("This item will be permanently deleted and cannot be recovered. Are you sure?");
	    if (r == true) {
	        //txt = "You pressed OK!";
	    } else {
	        //txt = "You pressed Cancel!";
	        return false;
	    }
	}
	</script>
<?php endif; ?>
<?php $__env->stopSection(); ?>
<?php echo $__env->make('layouts.main', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>